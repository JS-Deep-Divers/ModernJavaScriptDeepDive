# 2023.03.21_자바스크립트 딥다이브 (16. 프로퍼티 어트리뷰트)

## 기억하고 싶은 내용

### 내부 슬롯과 내부 메서드

- 자바스크립트 엔진의 구현 알고리즘을 설명하기 위해 **ECMAScript** 사양에서 내부 슬롯과 내부 메서드를 의미하는 **의사 프로퍼티(pseudo property)**와 **의사 메서드(pseudo method)**를 사용한다.



### 프로퍼티

- 자바스크립트 엔진은 **프로퍼티를 생성할 때** <u>프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 기본값으로</u> 자동 정의한다.



### 데이터 프로퍼티

키와 값으로 구성된 일반적인 프로퍼티.

- `[[Value]]`
- `[[Writeable]]`
- `[[Enumerable]]`
- `[[Configurable]]`



### 접근자 프로퍼티

자체적으로 값을 갖지 않고 다른 데이터 프로퍼티의 값을 읽거나 저장할 때 호출되는 접근자 함수로 구성된 프로퍼티.

- `[[Get]]`
- `[[Set]]`
- `[[Enumerable]]`
- `[[Configurable]]`

 

### 프로퍼티 접근 시나리오

1. 프로퍼티 키가 유효한지 확인한다
2. 프로토타입 체인에서 프로퍼티를 검색한다.
   - person 객체에fullName 프로퍼티가 존재한다
3. 검색된 fullName 프로퍼티가 데이터 프로퍼티인지 접근자 프로퍼티인지 확인한다.
   - funnName 프로퍼티는 접근자 프로퍼티이다.
4. 접근자 프로퍼티 fullName의 프로퍼티 어트리뷰트 [[Get]]의 값, 즉 getter 함수를 호출하여 그 결과를 반환한다.



## 객체 변경 감지

- 객체 확장 금지 : `Object.preventExtensions` - `추가` **금지** , `확장` **가능**
- 객체 밀봉 : `Object.seal` - `추가`/`삭제`/`재정의` **금지** , `읽기` `쓰기` **가능**
- 객체 동결 : `Object.freeze` - `추가`/`삭제`/`쓰기`/`재정의` **금지** , `읽기` **가능**







## 느낀점

- 어색하고  생소한 개념들이 많았던 장이다.
- 말 자체로 이해는 되었지만, 연결이 아직 되지 않은 느낌이다.
- 좀 더 자바스크립트에 경험이 쌓이고 한번 더 읽으면 확실히 알게 될 것 같다.





# 2023.03.21_자바스크립트 딥다이브 (17. 생성자 함수에 의한 객체 생성)

## 기억하고 싶은 내용

**생성자 함수**

- new 연산자와 함께 호출하여 객체(인스턴스)를 생성하는 함수를 말한다.
- 생성자 함수에 의해 생성된 객체를 인스턴스라 한다.



**this**

- 일반 함수로서 호출 : 전역 객체
- 메서드로서 호출 : 메서드를 호출한 객체(마침표 앞의 객체)
- 생성자 함수 호출 : 생성자 함수가(미래에) 생성할 인스턴스



 ### 생성자 함수의 인스턴스 생성 과정

- 생성자 함수의 역할은 <u>프로퍼티 구조가 동일한 인스턴스를 생성하기 위한 템플릿으로서 동작</u>하여
  - **인스턴스를 생성**하는 것과 **생성된 인스턴스를 초기화(인스턴스 프로퍼티 추가 및 초기값 할당)** 하는 것이다.



**생성 과정**

new 연산자와 함께 생성자 함수를 호출하면 다음 과정을 거쳐 암묵적으로 인스턴스를 생성하고 인스턴스를 초기화 한 후 암묵적으로 인스턴스를 반환한다.

1. 인스턴스 생성과 this 바인딩
   - 암묵적으로 빈 객체가 생성된다.
   - 암묵적으로 생성된 `빈 객체 = 인스턴스` 는 this에 바인딩된다.
   - 이 처리는 함수 몸체의 코드가 한 줄 씩 실행되는 런타임 이전에 실행된다.
2. 인스턴스 초기화
   - 생성자 함수에 기술되어 있는 코드가 한 줄씩 실행되어 `this`에 바인딩되어 있는 인스턴스를 초기화한다.
   - `this`에 바인딩되어 있는 인스턴스에 프로퍼티나 메서드 추가하고 생성자 함수가 인수로 전달받은 초기값을 인스턴스 프로퍼티에 할당하여 초기화하거나 고정값을 할당한다.
3. 인스턴스 반환
   - 생성자 함수 내부의 모든 처리가 끝나면 완성된 인스턴스가 바인딩된 `this`가 암묵적으로 반환된다.
   - 만약 `this`가 아닌 다른 객체를 명시적으로 반환하면 `this`가 반환되지 못하고 `return 문`에 명시한 객체가 반환된다.



### 내부 메서드 `[[Call]]`과 `[[Construct]]`

- **함수**는 객체이므로 **일반 객체와 동일하게 동작**할 수 있다.
- 일반 함수와 생성자 함수에 특별한 형식적 차이는 없다.
  - `new` 연산자와 함께 함수를 호출하면 해당 함수는 생성자 함수로 동작한다.
    - 함수 객체의 `[[Call]]`이 호출되는 것이아니라 `[[Construct]]`가 호출된다



### new.target

- `new.target`은 this와 유사하게 constructor인 모든 함수 내부에서 암묵적인 지역 변수와 같이 사용되며 메서드 프로퍼티라고 부른다.
- new 연산자와 함께 생성자 함수로서 호출되면 함수 내부의 new.target은 함수 자신을 가리킨다.





## 느낀점

- 생성자, 함수는 일반 객체와 동일하게 동작, `new.target` 은 `this`와 유사하게 동작. 이렇게 까지는 이해가 되었다.
- 그 외엔 이런게 있다. 정도로만 이해가 된 장이다.





